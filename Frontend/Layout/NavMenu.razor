@inject IUserService UserService
@if (Bro != null) //Hvis bro ik er logged-in, vis burger knappen ik.
{
    <button class="burger @(isMenuActive ? "active" : null)" @onclick="ToggleMenu" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
    </button>
}
<aside class="side-menu @(isMenuActive ? "open" : "")" @onclick:stopPropagation="true">
    <nav class="nav flex-column">
        <div class="nav-item px-3"><NavLink class="nav-link" href="Home" Match="NavLinkMatch.All" @onclick="CloseMenu">Min Sessioner</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="Explore" @onclick="CloseMenu">Explore</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="SushiCounter" @onclick="CloseMenu">SushiCounter</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="Sessionlist" @onclick="CloseMenu">Sessionlist</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="MyPage" @onclick="CloseMenu">Profile</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="Friends" @onclick="CloseMenu">Friends</NavLink></div>
        <div class="nav-item px-3"><NavLink class="nav-link" href="faq" @onclick="CloseMenu">FAQ</NavLink></div>
    </nav>
</aside>

@if (isMenuActive)
{
    <div class="backdrop" @onclick="CloseMenu"></div>
}
@code {
    private bool isMenuActive;
    private User? Bro; //bro bliver erklaret her for at kunne bruges i ToggleMenu metoden.
    private void ToggleMenu()
    {
        isMenuActive = !isMenuActive;
       /*
        if (isMenuActive)
            Console.WriteLine($"burgermenu {isMenuActive}, åben");
        else
            Console.WriteLine($"burgermenu {isMenuActive}, lukket");*/
    }
    
    private void CloseMenu()
    {
        if (isMenuActive)
        {
            isMenuActive = false;
            Console.WriteLine($"burgermenu {isMenuActive}, lukket");
        }
    }

    protected override async Task OnInitializedAsync()
    {
        Bro = await UserService.GetUserLoggedInAsync();
        StateHasChanged();
    }

}